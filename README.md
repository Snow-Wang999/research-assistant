# Research Assistant

科研助手 Agent - 自动搜索论文、分析内容、生成带引用的研究报告

**当前版本: v0.4.0** - PDF 全文获取与 UI 重构

## 功能特点

- 🔍 **多源搜索** (v0.1.0)：
  - 并行搜索 arXiv + OpenAlex，自动去重合并
  - 意图路由：自动判断使用快速搜索还是深度研究模式
  - CLI + Gradio Web 界面
- 📊 **智能分析** (v0.2.0)：
  - 智能查询分析：自动生成多组搜索关键词
  - 阅读导航：推荐入门、核心、最新论文
  - 摘要中文总结：将英文摘要翻译总结为中文
- 🧠 **深度研究** (v0.3.0)：
  - 子问题分解：将复杂问题拆解为可独立研究的子问题
  - 并行研究：多个 ResearchAgent 并行搜索和分析
  - 智能报告：生成带引用标注的结构化研究报告
  - 流式输出：显示各阶段耗时，支持停止按钮
- 📄 **PDF 全文获取** (v0.4.0)：
  - arXiv PDF 自动下载：通过 arxiv_id 自动获取全文
  - 智能 PDF 解析：PyMuPDF + 双栏处理 + 段落切分
  - 论文筛选器：LLM 基于摘要筛选高相关性论文
  - 全文研究模式：Deep Research 支持基于 PDF 全文的深度分析
  - UI 重构：Tab + Sidebar 架构，更清晰的交互体验
- 📚 **本地论文库** (v0.5.0 计划)：上传和管理用户本地 PDF 论文

## 快速开始

```bash
# 1. 配置环境变量
cp .env.example .env
# 编辑 .env 填入 DEEPSEEK_API_KEY

# 2. 安装依赖
uv venv && .venv\Scripts\activate && uv sync

# 3. 运行
python run.py              # CLI 模式
python run.py --web        # Web 界面 (http://127.0.0.1:7860)
python run.py --web --share  # Web + 公开链接
```

## 架构

### v0.1.0 - MVP 基础架构

```
用户查询
    ↓
┌─────────────────┐
│   意图路由       │  ← 判断简单/复杂查询
└────────┬────────┘
         ↓
┌─────────────────┐
│   统一搜索器     │  ← 并行搜索 arXiv + OpenAlex
└────────┬────────┘
         ↓
┌─────────────────┐
│   结果去重合并   │
└────────┬────────┘
         ↓
    论文列表输出
```

### v0.2.0 - 智能分析

```
用户查询
    ↓
┌─────────────────┐
│  QueryAnalyzer  │  ← 生成多组搜索关键词
└────────┬────────┘
         ↓
┌─────────────────┐
│   统一搜索器     │  ← 多关键词并行搜索
└────────┬────────┘
         ↓
┌─────────────────┐
│   综合排序       │  ← 相关性 + 时间 + 引用
└────────┬────────┘
         ↓
    ┌────┴────┐
    ↓         ↓
┌───────┐ ┌──────────┐
│Reading│ │Abstract  │
│Guide  │ │Summarizer│
└───────┘ └──────────┘
    ↓         ↓
阅读导航   中文摘要
```

### v0.3.0 - Deep Research 深度研究

```
用户复杂查询
    ↓
┌──────────────────────────┐
│  SubQuestionDecomposer   │  ← 使用 DeepSeek 分解问题
│  "对比 A 和 B"            │
│   → ["A核心", "B核心", "对比"]
└──────────────────────────┘
    ↓
    ↓  (并行执行)
┌──────────────────────────┐
│    ResearchAgent × N     │  ← 每个子问题独立搜索
│  ├─ 子问题1 → 搜索+压缩   │
│  ├─ 子问题2 → 搜索+压缩   │
│  └─ 子问题3 → 搜索+压缩   │
└──────────────────────────┘
    ↓
┌──────────────────────────┐
│    ReportGenerator       │  ← 汇总生成结构化报告
│  - 概述                   │
│  - 各子问题分析           │
│  - 综合结论               │
│  - 引用标注               │
└──────────────────────────┘
    ↓
研究报告（带引用）
```

### v0.4.0 - PDF 全文获取与 UI 重构

```
用户复杂查询
    ↓
┌──────────────────────────┐
│  SubQuestionDecomposer   │  ← 问题分解
└──────────────────────────┘
    ↓  (并行执行)
┌──────────────────────────┐
│    ResearchAgent × N     │  ← 搜索 + 摘要压缩
└──────────────────────────┘
    ↓
┌──────────────────────────┐
│    PaperScreener         │  ← 🆕 LLM筛选高相关论文
└──────────────────────────┘
    ↓
┌──────────────────────────┐
│    PDF Processor         │  ← 🆕 下载 + 解析 arXiv PDF
│  ├─ ArxivDownloader      │
│  ├─ PDFParser            │
│  └─ Chunker              │
└──────────────────────────┘
    ↓
┌──────────────────────────┐
│  FulltextResearchAgent   │  ← 🆕 基于全文深度分析
└──────────────────────────┘
    ↓
┌──────────────────────────┐
│    ReportGenerator       │  ← 生成研究报告
└──────────────────────────┘
    ↓
研究报告（带全文引用）
```

**UI 架构 (v0.4.0)**
```
┌─────────────────────────────────────────────────┐
│  [🔍搜索] [🧠深度研究] [📚论文库]               │  ← Tab 导航
├─────────────────────────────────────┬───────────┤
│                                     │           │
│         主内容区域                   │  论文详情  │  ← Sidebar
│   (搜索结果/研究报告)                │  侧边栏   │
│                                     │           │
└─────────────────────────────────────┴───────────┘
```

## 团队分工

| 模块 | 职责 | 负责人 |
|------|------|--------|
| `src/agents/` | Agent 编排、意图路由 | A |
| `src/tools/` | 搜索工具、本地论文 | B |
| `src/rag/` | 解析、检索、压缩 | B |
| `ui/` + `tests/` | 界面、评测 | C |

## 版本历史

| 版本 | 功能 | 状态 |
|------|------|------|
| v0.1.0 | MVP - 多源搜索 + 意图路由 | ✅ 完成 |
| v0.2.0 | 智能查询分析 + 阅读导航 | ✅ 完成 |
| v0.3.0 | Deep Research 深度研究 | ✅ 完成 |
| v0.4.0 | PDF 全文获取 + UI 重构 | ✅ 完成 |
| v0.5.0 | 本地 PDF 论文库 | 📋 计划中 |

## 注意事项

- 深度研究模式为实验性功能，论文相关性筛选仍在优化中
- PDF 全文获取目前仅支持 arXiv 论文
- 需要配置 `DEEPSEEK_API_KEY` 环境变量才能使用 LLM 功能
- 建议使用虚拟环境避免依赖冲突

## License

MIT
